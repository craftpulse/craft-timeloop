{"version":3,"file":"timeloop-field.31715934.js","sources":["../../../../../buildchain/src/js/utils/modelWrapper.ts","../../../../../buildchain/src/vue/components/CycleField.vue","../../../../../buildchain/src/vue/components/DaysField.vue","../../../../../buildchain/src/vue/components/SelectField.vue","../../../../../buildchain/src/vue/components/TimeStringField.vue","../../../../../buildchain/src/vue/components/LoopPeriod.vue","../../../../../buildchain/src/vue/Timeloop.vue","../../../../../buildchain/src/js/timeloop-field.ts"],"sourcesContent":["import { computed } from 'vue'\n\nexport function useModelWrapper(props, emit, name = 'modelValue' ) {\n    return computed({\n        get: () => props[name],\n        set: (value) => emit(`update:${name}`, value)\n    })\n}","<template>\n    <div\n        :class=\"[\n            'input flex flex-nowrap mb-0 flex-nowrap items-center',\n            utilities\n        ]\"\n    >\n        <span>\n            Repeats Every\n        </span>\n\n        <input\n            class=\"w-16 text\"\n            autocomplete=\"off\"\n            type=\"Number\"\n            min=\"1\"\n            v-model.number=\"cycle\"\n        />\n\n        <span>\n            {{ frequencyLabel }}\n        </span>\n    </div>\n</template>\n\n<script lang=\"ts\">\n\n    // Async load the Vue 3 APIs we need from the Vue ESM\n    import { computed, defineComponent } from 'vue'\n    import { useModelWrapper } from '@/js/utils/modelWrapper'\n\n    export default defineComponent({\n\n        props: {\n            // Initial Value\n            cycle: {\n                type: Number,\n                default: 1\n            },\n\n            // Frequency in datePeriod\n            frequency: {\n                type: String,\n                required: true,\n            },\n\n            // Tailwind Utilities\n            utilities: {\n                type: String,\n                required: false,\n            },\n\n        },\n\n        setup(props, { emit }) {\n\n            const frequencyLabel = computed(() => {\n\n                switch(props.frequency) {\n\n                    case 'P1D':\n                        return 'day(s)'\n\n                    case 'P1W':\n                        return 'week(s)'\n\n                    case 'P1M':\n                        return 'month(s)'\n\n                    case 'P1Y':\n                        return 'year(s)'\n\n                }\n\n            });\n\n            return {\n                frequencyLabel,\n                cycle: useModelWrapper(props, emit, 'cycle'),\n            }\n        },\n\n    });\n\n</script>\n","<template>\n\n    <div\n        :class=\"[\n            'input grid grid-cols-7 gap-1 items-center rounded-md mt-1',\n            utilities\n        ]\"\n    >\n\n        <span\n            v-for=\"(day, key, index) in weekDays\" :key=\"key\"\n            :class=\"[\n                'inline-flex items-center justify-center w-8 h-8 font-bold bg-white',\n                'hover:bg-black hover:text-white cursor-pointer',\n                days.includes(key) ? 'bg-black text-white' : '',\n            ]\"\n            @click=\"selectDay(key)\"\n        >\n            {{ day.shortName }}\n        </span>\n\n    </div>\n</template>\n\n<script lang=\"ts\">\n\n    // Async load the Vue 3 APIs we need from the Vue ESM\n    import { defineComponent } from 'vue'\n    import { useModelWrapper } from '@/js/utils/modelWrapper'\n\n    export default defineComponent({\n\n        props: {\n            // Initial Value\n            days: {\n                type: Array,\n                required: true,\n            },\n\n            // Tailwind Utilities\n            utilities: {\n                type: String,\n                required: false,\n            },\n\n        },\n\n        data: () => ({\n\n            weekDays: {\n                'Monday': {\n                    shortName: 'M',\n                    dayOfWeek: 1,\n                },\n                'Tuesday': {\n                    shortName: 'T',\n                    dayOfWeek: 2,\n                },\n                'Wednesday': {\n                    shortName: 'W',\n                    dayOfWeek: 3,\n                },\n                'Thursday': {\n                    shortName: 'T',\n                    dayOfWeek: 4,\n                },\n                'Friday': {\n                    shortName: 'F',\n                    dayOfWeek: 5,\n                },\n                'Saturday': {\n                    shortName: 'S',\n                    dayOfWeek: 6,\n                },\n                'Sunday': {\n                    shortName: 'S',\n                    dayOfWeek: 7,\n                }\n            },\n\n        }),\n\n        setup(props, { emit }) {\n\n            return {\n                days: useModelWrapper(props, emit, 'days'),\n            }\n\n        },\n\n        methods: {\n            selectDay( day ) {\n\n                if (this.days.includes(day)) {\n\n                    this.days = this.days.filter(name => name !== day)\n                        \n                } else {\n\n                    this.days.push(day)\n\n                }\n\n                const map = this.weekDays;\n                // always sort our days\n\n                this.days.sort((a, b) => {\n                    return map[a].dayOfWeek - map[b].dayOfWeek\n                })\n\n            },\n\n\n        }\n\n    });\n\n</script>\n","<template>\n    <div \n        :class=\"[ \n                'input',\n                utilities\n            ]\"\n        >\n        <div class=\"select\">\n            <select\n                v-model=\"selected\"\n            >\n                <option v-for=\"(label, key) in options\" :key=\"key\" :value=\"key\">\n                    {{ label }}\n                </option>\n            </select>\n        </div>\n    </div>\n</template>\n\n<script lang=\"ts\">\n\n    // Async load the Vue 3 APIs we need from the Vue ESM\n    import { defineComponent } from 'vue'\n    import { useModelWrapper } from '@/js/utils/modelWrapper'\n\n    export default defineComponent({\n\n        props: {\n            \n            // Options for the select field\n            options: {\n                type: Object,\n                required: true,\n            },\n            selected: {\n                type: String,\n                required: true,\n            },\n            \n            // Tailwind Utilities\n            utilities: {\n                type: String,\n                required: false,\n            },\n        },\n\n\n        setup(props, { emit }) {\n            return {\n                selected: useModelWrapper(props, emit, 'selected'),\n            }\n        },\n\n    });\n\n</script>","<template>\n\n    <div\n        :class=\"[\n            'flex flex-nowrap mb-0',\n            utilities\n        ]\"\n    >\n\n        <select-field\n            :options=\"ordinals\"\n            v-model:selected=\"timestring.ordinal\"\n            @change=\"$emit('update:ordinal', timestring.ordinal)\"\n\n        />\n\n        <select-field\n            :options=\"days\"\n            v-model:selected=\"timestring.day\"\n            @change=\"$emit('update:day', timestring.day)\"\n        />\n\n\n    </div>\n</template>\n\n<script lang=\"ts\">\n\n    // Async load the Vue 3 APIs we need from the Vue ESM\n    import { reactive, defineComponent } from 'vue'\n    import SelectField from '@/vue/components/SelectField.vue'\n\n    export default defineComponent({\n\n        components: {\n            'select-field': SelectField,\n        },\n\n        props: {\n\n            // Tailwind Utilities\n            utilities: {\n                type: String,\n                required: false,\n            },\n\n            ordinal: {\n                type: String,\n                default: 'none',\n            },\n\n            day: {\n                type: String,\n                default: 'none',\n            }\n\n        },\n\n        data: () => ({\n\n            ordinals: {\n                'none': 'None',\n                'first': 'First',\n                'second': 'Second',\n                'third': 'Third',\n                'fourth': 'Fourth',\n                'last': 'Last',\n            },\n\n            days: {\n                'none': 'None',\n                'monday': 'Monday',\n                'tuesday': 'Tuesday',\n                'wednesday': 'Wednesday',\n                'thursday': 'Thursday',\n                'friday': 'Friday',\n                'saturday': 'Saturday',\n                'sunday': 'Sunday',\n            },\n\n        }),\n\n        setup: (props) => {\n\n            const timestring = reactive({\n                ordinal: props.ordinal || 'none',\n                day: props.day || 'none',\n            })\n\n            return { timestring }\n\n        }\n\n    });\n\n</script>\n","<template>\n    <div\n        :id=\"'fields-' + options.id + '-field'\"\n        class=\"field\"\n\n    >\n\n        <div class=\"heading\">\n            <label\n                :id=\"'fields-' + options.id + '-label'\"\n                :class=\"options.required ? 'required' : ''\"\n            >\n                {{ options.label }}\n            </label>\n        </div>\n\n        <div\n            :id=\"'fields-' + options.id + '-instructions'\"\n            class=\"instructions\">\n            <span>\n                {{ options.instructions }}\n            </span>\n        </div>\n\n        <div class=\"flex flex-nowrap\">\n\n            <select-field\n                :settings=\"options\"\n                :options=\"periods\"\n                v-model:selected=\"period.frequency\"\n                @change=\"sanitizeData(period)\"\n            />\n\n        </div>\n\n        <div class=\"heading\">\n            <label class=\"mt-6\">\n                Interval\n            </label>\n        </div>\n\n        <div class=\"mb-0 items-center w-full bg-gray-300\">\n            <div class=\"flex flex-nowrap px-3 py-1 min-h-12\">\n                <cycle-field\n                    v-if=\"period.frequency\"\n                    :settings=\"options\"\n                    :frequency=\"period.frequency\"\n                    utilities=\"\"\n                    v-model:cycle.number=\"period.cycle\"\n                />\n\n                <div\n                    class=\"flex flex-nowrap items-center mb-0\"\n                    v-if=\"period.frequency && period.frequency === 'P1W'\"\n                >\n                    <span>on</span>\n                    <days-field\n                        :settings=\"options\"\n                        :frequency=\"period.frequency\"\n                        v-model:days=\"period.days\"\n                    />\n                </div>\n\n                <div\n                    class=\"flex flex-nowrap items-center mb-0\"\n                    v-if=\"period.frequency && period.frequency === 'P1M'\"\n                >\n                    <span>on the</span>\n                    <time-string-field\n                        :settings=\"options\"\n                        :ordinal=\"period.timestring.ordinal\"\n                        :day=\"period.timestring.day\"\n                        v-model:ordinal=\"period.timestring.ordinal\"\n                        v-model:day=\"period.timestring.day\"\n                    />\n                </div>\n            </div>\n        </div>\n\n        <input\n            type=\"hidden\"\n            :id=\"'fields-' + options.id\"\n            :name=\"'fields' + options.name\"\n            :aria-describedby=\"'fields-' + options.name + '-instructions'\"\n            :value=\"JSON.stringify(period)\"\n        >\n\n        <!--h4>Craft Data</h4>\n\n        <div class=\"bg-purple-300 px-8 py-4 rounded-md text-xl my-4\">\n            {{ options.value }}\n        </div>\n\n        <h4>Vue Data</h4>\n\n        <div class=\"bg-green-300 px-8 py-4 rounded-md text-xl my-4\">\n            {{ period }}\n        </div-->\n\n    </div>\n</template>\n\n<script lang=\"ts\">\n\n    // Async load the Vue 3 APIs we need from the Vue ESM\n    import { defineComponent } from 'vue'\n    import CycleField from '@/vue/components/CycleField.vue'\n    import DaysField from '@/vue/components/DaysField.vue'\n    import TimeStringField from '@/vue/components/TimeStringField.vue'\n    import SelectField from '@/vue/components/SelectField.vue'\n\n\n    export default defineComponent({\n        components: {\n            'select-field': SelectField,\n            'cycle-field': CycleField,\n            'days-field': DaysField,\n            'time-string-field': TimeStringField\n        },\n\n        props: {\n            options: {\n                type: Object,\n                required: true,\n            },\n        },\n\n        data: () => ({\n\n            periods: {\n                'P1D': 'Every Day',\n                'P1W': 'Every Week',\n                'P1M': 'Every Month',\n                'P1Y': 'Every Year',\n            },\n\n            period: {\n                frequency: 'P1D',\n                days: [],\n                cycle: 1,\n                timestring: {\n                    ordinal: null,\n                    day: null\n                }\n            },\n\n        }),\n\n        methods: {\n\n            sanitizeData(data) {\n\n                switch (data.frequency) {\n                    case 'P1D':\n                    case 'P1Y':\n\n                        this.period.days = [];\n                        this.period.timestring.ordinal = null;\n                        this.period.timestring.day = null;\n\n                        break\n\n                    case 'P1W':\n\n                        this.period.timestring.ordinal = null\n                        this.period.timestring.day = null\n\n                        break\n\n                    case 'P1M':\n\n                        this.period.days = []\n\n                        if ( !this.period.timestring.ordinal && !this.period.timestring.day ) {\n                            this.period.timestring.ordinal = 'none'\n                            this.period.timestring.day = 'none'\n                        }\n\n                        break\n\n                    default:\n\n                        this.period = {\n                            frequency: 'P1D',\n                            days: [],\n                            cycle: 1,\n                            timestring: {\n                                ordinal: null,\n                                day: null\n                            }\n                        }\n\n                }\n\n            }\n\n        },\n\n        mounted() {\n\n            if ( this.options.value ) {\n                this.period = this.options.value\n            }\n\n        }\n\n    });\n\n</script>\n","<script lang=\"ts\">\n\n    // Async load the Vue 3 APIs we need from the Vue ESM\n    import { defineComponent } from 'vue';\n    import LoopPeriod from '@/vue/components/LoopPeriod.vue'\n\n    export default defineComponent({\n        components: {\n            'loop-period': LoopPeriod,\n        },\n    });\n\n</script>\n","import Timeloop from '@/vue/Timeloop.vue';\nimport { createApp } from 'vue';\n\n// App main\nconst main = async () => {\n    // Create our vue instance\n    const timeloop = createApp(Timeloop);\n    // Mount the app\n    const root = timeloop.mount('#fields-timeloop');\n\n    return root;\n};\n\n// Execute async function\nmain().then( (root) => {\n});\n"],"names":["props","emit","name","computed","get","set","value","defineComponent","cycle","type","Number","default","frequency","String","required","utilities","setup","frequencyLabel","useModelWrapper","days","Array","data","weekDays","Monday","shortName","dayOfWeek","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday","methods","[object Object]","day","this","includes","filter","push","map","sort","a","b","options","Object","selected","components","select-field","SelectField","ordinal","ordinals","none","first","second","third","fourth","last","monday","tuesday","wednesday","thursday","friday","saturday","sunday","timestring","reactive","cycle-field","CycleField","days-field","DaysField","time-string-field","TimeStringField","periods","P1D","P1W","P1M","P1Y","period","loop-period","LoopPeriod","async","createApp","Timeloop","mount","main","then","root"],"mappings":"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"}