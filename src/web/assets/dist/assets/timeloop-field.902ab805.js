import{c as e,d as i,a as t,w as s,v as n,b as d,t as r,o as a,F as l,r as o,e as c,f as y,g as u,h as p,i as f}from"./vendor.e8938c27.js";function m(i,t,s="modelValue"){return e({get:()=>i[s],set:e=>t(`update:${s}`,e)})}var h=i({props:{cycle:{type:Number,default:1},frequency:{type:String,required:!0},utilities:{type:String,required:!1}},setup:(i,{emit:t})=>({frequencyLabel:e((()=>{switch(i.frequency){case"P1D":return"day(s)";case"P1W":return"week(s)";case"P1M":return"month(s)";case"P1Y":return"year(s)"}})),cycle:m(i,t,"cycle")})});const g=d("span",null," Repeats Every ",-1);h.render=function(e,i,l,o,c,y){return a(),t("div",{class:["input flex flex-nowrap mb-0 flex-nowrap items-center",e.utilities]},[g,s(d("input",{class:"w-16 text",autocomplete:"off",type:"Number",min:"1","onUpdate:modelValue":i[1]||(i[1]=i=>e.cycle=i)},null,512),[[n,e.cycle,void 0,{number:!0}]]),d("span",null,r(e.frequencyLabel),1)],2)};var v=i({props:{days:{type:Array,required:!0},utilities:{type:String,required:!1}},data:()=>({weekDays:{Monday:{shortName:"M",dayOfWeek:1},Tuesday:{shortName:"T",dayOfWeek:2},Wednesday:{shortName:"W",dayOfWeek:3},Thursday:{shortName:"T",dayOfWeek:4},Friday:{shortName:"F",dayOfWeek:5},Saturday:{shortName:"S",dayOfWeek:6},Sunday:{shortName:"S",dayOfWeek:7}}}),setup:(e,{emit:i})=>({days:m(e,i,"days")}),methods:{selectDay(e){this.days.includes(e)?this.days=this.days.filter((i=>i!==e)):this.days.push(e);const i=this.weekDays;this.days.sort(((e,t)=>i[e].dayOfWeek-i[t].dayOfWeek))}}});v.render=function(e,i,s,n,d,c){return a(),t("div",{class:["input grid grid-cols-7 gap-1 items-center rounded-md mt-1",e.utilities]},[(a(!0),t(l,null,o(e.weekDays,((i,s,n)=>(a(),t("span",{key:s,class:["inline-flex items-center justify-center w-8 h-8 font-bold bg-white","hover:bg-black hover:text-white cursor-pointer",e.days.includes(s)?"bg-black text-white":""],onClick:i=>e.selectDay(s)},r(i.shortName),11,["onClick"])))),128))],2)};var b=i({props:{options:{type:Object,required:!0},selected:{type:String,required:!0},utilities:{type:String,required:!1}},setup:(e,{emit:i})=>({selected:m(e,i,"selected")})});const q={class:"select"};b.render=function(e,i,n,y,u,p){return a(),t("div",{class:["input",e.utilities]},[d("div",q,[s(d("select",{"onUpdate:modelValue":i[1]||(i[1]=i=>e.selected=i)},[(a(!0),t(l,null,o(e.options,((e,i)=>(a(),t("option",{key:i,value:i},r(e),9,["value"])))),128))],512),[[c,e.selected]])])],2)};var k=i({components:{"select-field":b},props:{utilities:{type:String,required:!1},ordinal:{type:String,default:"none"},day:{type:String,default:"none"}},data:()=>({ordinals:{none:"None",first:"First",second:"Second",third:"Third",fourth:"Fourth",last:"Last"},days:{none:"None",monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"}}),setup:e=>({timestring:y({ordinal:e.ordinal||"none",day:e.day||"none"})})});k.render=function(e,i,s,n,r,l){const o=u("select-field");return a(),t("div",{class:["flex flex-nowrap mb-0",e.utilities]},[d(o,{options:e.ordinals,selected:e.timestring.ordinal,"onUpdate:selected":i[1]||(i[1]=i=>e.timestring.ordinal=i),onChange:i[2]||(i[2]=i=>e.$emit("update:ordinal",e.timestring.ordinal))},null,8,["options","selected"]),d(o,{options:e.days,selected:e.timestring.day,"onUpdate:selected":i[3]||(i[3]=i=>e.timestring.day=i),onChange:i[4]||(i[4]=i=>e.$emit("update:day",e.timestring.day))},null,8,["options","selected"])],2)};var w=i({components:{"select-field":b,"cycle-field":h,"days-field":v,"time-string-field":k},props:{options:{type:Object,required:!0}},data:()=>({periods:{P1D:"Every Day",P1W:"Every Week",P1M:"Every Month",P1Y:"Every Year"},period:{frequency:"P1D",days:[],cycle:1,timestring:{ordinal:null,day:null}}}),methods:{sanitizeData(e){switch(e.frequency){case"P1D":case"P1Y":this.period.days=[],this.period.timestring.ordinal=null,this.period.timestring.day=null;break;case"P1W":this.period.timestring.ordinal=null,this.period.timestring.day=null;break;case"P1M":this.period.days=[],this.period.timestring.ordinal||this.period.timestring.day||(this.period.timestring.ordinal="none",this.period.timestring.day="none");break;default:this.period={frequency:"P1D",days:[],cycle:1,timestring:{ordinal:null,day:null}}}}},mounted(){this.options.value&&(this.period=this.options.value)}});const x={class:"heading"},P={class:"bg-gray-200 rounded-md p-4"},S={class:"field"},W=d("div",{class:"heading"},[d("label",null,"Frequency")],-1),D=d("div",{class:"instructions"},[d("span",null,"Select a frequency")],-1),N={class:"flex flex-nowrap"},O={class:"field"},M=d("div",{class:"heading"},[d("label",null," Interval ")],-1),U=d("div",{class:"instructions"},[d("span",null,"Provide an interval")],-1),F={class:"mb-0 items-center w-full bg-gray-300 rounded-md"},T={class:"flex flex-nowrap px-3 py-1 min-h-12"},C={key:1,class:"flex flex-nowrap items-center mb-0"},E=d("span",null,"on",-1),j={key:2,class:"flex flex-nowrap items-center mb-0"},Y=d("span",null,"on the",-1);w.render=function(e,i,s,n,l,o){const c=u("select-field"),y=u("cycle-field"),f=u("days-field"),m=u("time-string-field");return a(),t("div",{id:"fields-"+e.options.id+"-field",class:"field"},[d("div",x,[d("label",{id:"fields-"+e.options.id+"-label",class:e.options.required?"required":""},r(e.options.label),11,["id"])]),d("div",{id:"fields-"+e.options.id+"-instructions",class:"instructions"},[d("span",null,r(e.options.instructions),1)],8,["id"]),d("div",P,[d("div",S,[W,D,d("div",N,[d(c,{settings:e.options,options:e.periods,selected:e.period.frequency,"onUpdate:selected":i[1]||(i[1]=i=>e.period.frequency=i),onChange:i[2]||(i[2]=i=>e.sanitizeData(e.period))},null,8,["settings","options","selected"])])]),d("div",O,[M,U,d("div",F,[d("div",T,[e.period.frequency?(a(),t(y,{key:0,settings:e.options,frequency:e.period.frequency,utilities:"",cycle:e.period.cycle,"onUpdate:cycle":i[3]||(i[3]=i=>e.period.cycle=i),cycleModifiers:{number:!0}},null,8,["settings","frequency","cycle"])):p("",!0),e.period.frequency&&"P1W"===e.period.frequency?(a(),t("div",C,[E,d(f,{settings:e.options,frequency:e.period.frequency,days:e.period.days,"onUpdate:days":i[4]||(i[4]=i=>e.period.days=i)},null,8,["settings","frequency","days"])])):p("",!0),e.period.frequency&&"P1M"===e.period.frequency?(a(),t("div",j,[Y,d(m,{settings:e.options,ordinal:e.period.timestring.ordinal,day:e.period.timestring.day,"onUpdate:ordinal":i[5]||(i[5]=i=>e.period.timestring.ordinal=i),"onUpdate:day":i[6]||(i[6]=i=>e.period.timestring.day=i)},null,8,["settings","ordinal","day"])])):p("",!0)])])])]),d("input",{type:"hidden",id:"fields-"+e.options.id,name:"fields"+e.options.name,"aria-describedby":"fields-"+e.options.name+"-instructions",value:JSON.stringify(e.period)},null,8,["id","name","aria-describedby","value"])],8,["id"])};var L=i({components:{"loop-period":w}});(async()=>f(L).mount("#fields-timeloop"))().then((e=>{}));
//# sourceMappingURL=timeloop-field.902ab805.js.map
